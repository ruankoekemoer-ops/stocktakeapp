<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Take Management System</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <!-- Microsoft Authentication Library (MSAL.js) -->
    <script src="https://alcdn.msauth.net/browser/2.38.1/js/msal-browser.min.js"></script>
</head>
<body>
    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>
    
    <!-- Role Selection Screen (shown first) -->
    <div id="roleSelectionScreen" class="role-selection-screen">
        <div class="role-selection-card">
            <h1>Stock Take Management System</h1>
            <p class="subtitle">Select your role to continue</p>
            <div class="role-options">
                <button type="button" class="role-option-btn counter-btn" id="counterBtn">
                    <div class="role-icon">üì±</div>
                    <h2>Counter</h2>
                    <p>Scan and count inventory items</p>
                </button>
                <button type="button" class="role-option-btn manager-btn" id="managerBtn">
                    <div class="role-icon">‚öôÔ∏è</div>
                    <h2>Manager</h2>
                    <p>Manage companies, warehouses, and view reports</p>
                </button>
            </div>
            <div style="margin-top: 2rem; text-align: center;">
                <button onclick="handleLogout()" class="btn btn-secondary">Logout</button>
            </div>
        </div>
    </div>

    <!-- Main App (hidden until role selected) -->
    <div id="mainApp" class="app-container" style="display: none;">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">StockTake</div>
            </div>
            <nav class="sidebar-nav" id="sidebarNav">
                <!-- Navigation items will be populated by JavaScript -->
            </nav>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- App Header -->
            <header class="app-header" id="appHeader">
                <div class="header-left">
                    <button onclick="goHome()" class="btn-home" title="Home" style="margin-right: 1rem;">
                        <span style="font-size: 1.2rem;">üè†</span>
                    </button>
                    <div class="header-title" id="pageTitle">Stock Take</div>
                </div>
                <div class="header-actions" id="headerActions">
                    <div id="userInfo" class="user-info" style="display: none;"></div>
                    <button id="authButton" class="btn btn-primary btn-small">Sign In</button>
                    <span class="role-badge" id="roleBadge">Manager</span>
                    <button onclick="switchRole()" class="btn-switch-role">Switch Role</button>
                    <button onclick="handleLogout()" class="btn btn-secondary btn-small" id="logoutButton" style="display: none;">Logout</button>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <div class="page-content">
                    <!-- Stock Take Tab -->
                    <div id="stocktakeTab" class="tab-content active" style="display: block;">
                        <div class="page-header">
                            <h1 class="page-title">Stock Take</h1>
                            <p class="page-subtitle" id="roleSubtitle">Manage companies, warehouses, and view reports</p>
                        </div>

                        <!-- Counter Mode: Simple Start Counting -->
                        <section class="card" id="counterStartSection" style="display: none;">
                            <div class="card-header">
                                <h2 class="card-title">Start Counting</h2>
                            </div>
                            <div class="start-counting-container">
                                <p class="start-hint">Scan a bin location to begin counting</p>
                                <div class="scan-input-large">
                                    <label for="counterBinLocationInput" class="scan-label">Bin Location Code</label>
                                    <p class="scan-hint">Scan QR code or enter bin code</p>
                                    <div class="input-with-button-large">
                                        <input 
                                            type="text" 
                                            id="counterBinLocationInput" 
                                            class="form-control scan-input" 
                                            placeholder="Scan or enter bin code to start..."
                                            onkeypress="if(event.key==='Enter') handleCounterBinLocationScan()"
                                            autocomplete="off"
                                            autofocus
                                        >
                                        <button onclick="startQRScan('counterBinLocationInput', handleCounterBinLocationScan)" class="btn btn-secondary btn-large" title="Scan QR Code">üì∑</button>
                                        <button onclick="handleCounterBinLocationScan()" class="btn btn-primary btn-large">Start</button>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Manager Mode: Open/Close Stock Take -->
                        <section class="card" id="managerStockTakeSection">
                            <div class="card-header">
                                <h2 class="card-title">Manage Stock Take</h2>
                            </div>
                            <div id="stockTakeStatus" class="status-box">
                                <p>No stock take open</p>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="openStockTakeCompany">Company</label>
                                    <select id="openStockTakeCompany" class="form-control" required onchange="updateWarehousesForOpenStockTake()">
                                        <option value="">Select Company</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="openStockTakeWarehouse">Warehouse</label>
                                    <select id="openStockTakeWarehouse" class="form-control" required onchange="validateManagerForWarehouse()">
                                        <option value="">Select Warehouse</option>
                                    </select>
                                </div>
                            </div>
                            <div id="managerValidationMessage" class="validation-message" style="display: none;"></div>
                            <div class="button-group">
                                <button onclick="openStockTake()" class="btn btn-primary" id="openStockTakeBtn">Open Stock Take</button>
                                <button onclick="closeStockTake()" class="btn btn-danger" id="closeStockTakeBtn" style="display: none;">Close Stock Take</button>
                            </div>
                        </section>

                        <!-- Scan Bin Location -->
                        <section class="card scanning-section" id="binLocationSection" style="display: none;">
                            <div class="card-header">
                                <h2 class="card-title">Scan Bin Location</h2>
                            </div>
                            <div id="currentBinLocation" class="current-bin-box" style="display: none;">
                                <h3>Current Bin: <span id="currentBinCode"></span></h3>
                                <p id="currentBinInfo"></p>
                            </div>
                            <div class="scanning-container">
                                <div class="scan-input-large">
                                    <label for="binLocationInput" class="scan-label">Bin Location Code</label>
                                    <p class="scan-hint">Scan QR code or type bin code</p>
                                    <div class="input-with-button-large">
                                        <input 
                                            type="text" 
                                            id="binLocationInput" 
                                            class="form-control scan-input" 
                                            placeholder="Scan or enter bin code..."
                                            onkeypress="if(event.key==='Enter') handleBinLocationScan()"
                                            autocomplete="off"
                                            autofocus
                                        >
                                        <button onclick="startQRScan('binLocationInput', handleBinLocationScan)" class="btn btn-secondary btn-large" title="Scan QR Code">Scan</button>
                                        <button onclick="handleBinLocationScan()" class="btn btn-primary btn-large">Scan</button>
                                    </div>
                                    <button onclick="clearBinLocation()" class="btn btn-link" id="clearBinBtn" style="display: none; margin-top: 10px;">Clear Bin Location</button>
                                </div>
                            </div>
                        </section>

                        <!-- Scan Items -->
                        <section class="card scanning-section" id="itemScanSection" style="display: none;">
                            <div class="card-header">
                                <h2 class="card-title">Scan Items</h2>
                            </div>
                            <div class="scanning-container">
                                <div class="scan-input-large">
                                    <label for="itemCodeInput" class="scan-label">Item Code</label>
                                    <p class="scan-hint">Scan QR code for item</p>
                                    <div class="input-with-button-large">
                                        <input 
                                            type="text" 
                                            id="itemCodeInput" 
                                            class="form-control scan-input" 
                                            placeholder="Scan QR code or enter item code..."
                                            onkeypress="if(event.key==='Enter') handleItemCodeScan()"
                                            autocomplete="off"
                                            autofocus
                                        >
                                        <button onclick="startQRScan('itemCodeInput', handleItemCodeScan)" class="btn btn-secondary btn-large" title="Scan QR Code">Scan</button>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="itemNameInput">Item Name</label>
                                        <input 
                                            type="text" 
                                            id="itemNameInput" 
                                            class="form-control" 
                                            placeholder="Auto-filled when item code is scanned"
                                            readonly
                                            style="background-color: var(--bg-secondary);"
                                        >
                                    </div>
                                    <div class="form-group">
                                        <label for="itemQuantityInput">Quantity</label>
                                        <input 
                                            type="number" 
                                            id="itemQuantityInput" 
                                            class="form-control" 
                                            min="0" 
                                            value="1"
                                            required
                                            inputmode="numeric"
                                            pattern="[0-9]*"
                                        >
                                    </div>
                                </div>
                                
                                <div class="button-group-center">
                                    <button onclick="addItemToBin()" class="btn btn-primary btn-large">Add Item to Bin</button>
                                </div>
                            </div>
                        </section>

                        <!-- Items in Current Bin -->
                        <section class="card scanning-section" id="binItemsSection" style="display: none;">
                            <div class="card-header">
                                <h2 class="card-title">Items in Current Bin</h2>
                            </div>
                            <div id="binItemsList" class="items-list"></div>
                            <div id="noBinItems" class="no-items" style="display: none;">No items added yet. Scan items above.</div>
                            <div class="button-group" style="margin-top: 20px;">
                                <button onclick="submitBinLocation()" class="btn btn-success btn-large" id="submitBinBtn">Submit Bin Location</button>
                                <button onclick="clearBinItems()" class="btn btn-secondary btn-large">Clear All Items</button>
                            </div>
                        </section>
                    </div>

                    <!-- Open Stock Takes Tab -->
                    <div id="openStockTakesTab" class="tab-content" style="display: none;">
                        <div class="page-header">
                            <h1 class="page-title">Open Stock Takes</h1>
                            <p class="page-subtitle">View and manage active stock takes</p>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Active Stock Takes</h2>
                                <button onclick="loadOpenStockTakes()" class="btn btn-secondary btn-small">Refresh</button>
                            </div>
                            <div id="openStockTakesList" class="items-list"></div>
                            <div id="noOpenStockTakes" class="no-items" style="display: none;">No open stock takes found.</div>
                        </div>
                    </div>

                    <!-- Setup Tab -->
                    <div id="setupTab" class="tab-content" style="display: none;">
                        <!-- Company Selection -->
                        <div class="card" style="margin-bottom: 2rem;">
                            <div class="card-header">
                                <h2 class="card-title">Select Company</h2>
                                <button onclick="openAddCompanyModal()" class="btn btn-primary btn-small">Add Company</button>
                            </div>
                            <div class="form-group">
                                <select id="selectedCompany" class="form-control" onchange="onCompanySelected()" style="font-size: 1rem; padding: 0.75rem;">
                                    <option value="">-- Select a Company --</option>
                                </select>
                            </div>
                            <div id="companiesList" class="items-list" style="margin-top: 1.5rem;"></div>
                            <div id="noCompanies" class="no-items" style="display: none;">No companies found</div>
                        </div>

                        <!-- Company Details (shown when company selected) -->
                        <div id="companyDetailsSection" style="display: none;">
                            <!-- Warehouses Section -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div class="card-header">
                                    <h2 class="card-title">Warehouses</h2>
                                    <button onclick="openAddWarehouseModal()" class="btn btn-primary btn-small">Add Warehouse</button>
                                </div>
                                <div id="warehousesList" class="items-list"></div>
                                <div id="noWarehouses" class="no-items" style="display: none;">No warehouses found</div>
                            </div>

                            <!-- Bin Locations Section -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div class="card-header">
                                    <h2 class="card-title">Bin Locations</h2>
                                    <button onclick="openAddBinLocationModal()" class="btn btn-primary btn-small">Add Bin Location</button>
                                </div>
                                <div class="form-group" style="margin-bottom: 1.5rem;">
                                    <select id="binLocationWarehouseFilter" class="form-control" onchange="loadBinLocationsForCompany()">
                                        <option value="">All Warehouses</option>
                                    </select>
                                </div>
                                <div id="binLocationsList" class="items-list"></div>
                                <div id="noBinLocations" class="no-items" style="display: none;">No bin locations found</div>
                            </div>

                            <!-- Managers Section -->
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">Managers</h2>
                                    <button onclick="openAddManagerModal()" class="btn btn-primary btn-small">Add Manager</button>
                                </div>
                                <div class="form-group" style="margin-bottom: 1.5rem;">
                                    <select id="managerWarehouseFilter" class="form-control" onchange="loadManagersForCompany()">
                                        <option value="">All Warehouses</option>
                                    </select>
                                </div>
                                <div id="managersList" class="items-list"></div>
                                <div id="noManagers" class="no-items" style="display: none;">No managers found</div>
                            </div>
                        </div>
                    </div>

                    <!-- System Admin Tab -->
                    <div id="systemAdminTab" class="tab-content" style="display: none;">
                        <div class="page-header">
                            <h1 class="page-title">System Administration</h1>
                            <p class="page-subtitle">Manage access permissions and system settings</p>
                        </div>

                        <!-- Password Protection -->
                        <div id="systemAdminLogin" class="card" style="max-width: 500px; margin: 2rem auto;">
                            <div class="card-header">
                                <h2 class="card-title">Admin Access Required</h2>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label for="adminPassword">Enter Admin Password</label>
                                    <input type="password" id="adminPassword" class="form-control" placeholder="Enter password..." required autofocus>
                                </div>
                                <div class="button-group">
                                    <button type="button" id="accessAdminBtn" class="btn btn-primary" onclick="checkAdminPassword()">Access Admin Panel</button>
                                </div>
                                <p class="help-text" style="margin-top: 0.5rem; color: var(--text-muted); font-size: 0.9rem;">Default password: <strong>admin</strong></p>
                            </div>
                            <div id="adminPasswordError" class="error-message" style="display: none; color: var(--error-color); margin-top: 1rem;"></div>
                        </div>

                        <!-- Admin Panel Content (hidden until authenticated) -->
                        <div id="systemAdminContent" style="display: none;">
                            <!-- Manager-Company Access -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div class="card-header">
                                    <h2 class="card-title">Manager-Company Access</h2>
                                    <button onclick="openAddManagerCompanyAccessModal()" class="btn btn-primary btn-small">Add Access</button>
                                </div>
                                <div class="form-group" style="margin-bottom: 1.5rem;">
                                    <select id="adminManagerFilter" class="form-control" onchange="loadManagerCompanyAccess()">
                                        <option value="">All Managers</option>
                                    </select>
                                </div>
                                <div id="managerCompanyAccessList" class="items-list"></div>
                                <div id="noManagerAccess" class="no-items" style="display: none;">No access records found</div>
                            </div>

                            <!-- Counter-Company Access -->
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">Counter-Company Access</h2>
                                    <button onclick="openAddCounterCompanyAccessModal()" class="btn btn-primary btn-small">Add Access</button>
                                </div>
                                <div class="form-group" style="margin-bottom: 1.5rem;">
                                    <select id="adminCounterFilter" class="form-control" onchange="loadCounterCompanyAccess()">
                                        <option value="">All Counters</option>
                                    </select>
                                </div>
                                <div id="counterCompanyAccessList" class="items-list"></div>
                                <div id="noCounterAccess" class="no-items" style="display: none;">No access records found</div>
                            </div>
                        </div>
                    </div>

                    <!-- View Items Tab -->
                    <div id="viewTab" class="tab-content" style="display: none;">
                        <div class="view-items-page">
                            <div class="view-items-header">
                                <div>
                                    <h1 class="page-title">Stock Items</h1>
                                    <p class="page-subtitle">View and manage all stock items</p>
                                </div>
                                <button onclick="loadItems()" class="btn btn-secondary">Refresh</button>
                            </div>
                            
                            <div class="view-items-filters">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Filter by Company</label>
                                        <select id="viewCompanyFilter" class="form-control" onchange="applyViewFilters()">
                                            <option value="">All Companies</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Filter by Warehouse</label>
                                        <select id="viewWarehouseFilter" class="form-control" onchange="applyViewFilters()">
                                            <option value="">All Warehouses</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Search Items</label>
                                        <input 
                                            type="text" 
                                            id="viewItemsSearch" 
                                            class="form-control" 
                                            placeholder="Search by item code or name..."
                                            onkeyup="applyViewFilters()"
                                        >
                                    </div>
                                </div>
                            </div>
                            
                            <div class="view-items-content">
                                <div id="viewItemsLoading" class="loading-state" style="display: none;">
                                    <p>Loading items...</p>
                                </div>
                                <div id="viewItemsList" class="view-items-list"></div>
                                <div id="viewItemsEmpty" class="no-items" style="display: none;">
                                    <p>No items found.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Modals -->
    <!-- Add/Edit Company Modal -->
    <div id="companyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="companyModalTitle">Add Company</h3>
                <button class="modal-close" onclick="closeCompanyModal()">&times;</button>
            </div>
            <form id="companyForm" onsubmit="handleCompanySubmit(event)">
                <div class="form-group">
                    <label for="companyCode">Company Code *</label>
                    <input type="text" id="companyCode" class="form-control" required placeholder="e.g., COMP001">
                </div>
                <div class="form-group">
                    <label for="companyName">Company Name *</label>
                    <input type="text" id="companyName" class="form-control" required placeholder="e.g., Acme Corporation">
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="closeCompanyModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Warehouse Modal -->
    <div id="warehouseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="warehouseModalTitle">Add Warehouse</h3>
                <button class="modal-close" onclick="closeWarehouseModal()">&times;</button>
            </div>
            <form id="warehouseForm" onsubmit="handleWarehouseSubmit(event)">
                <div class="form-group">
                    <label for="warehouseCompany">Company *</label>
                    <select id="warehouseCompany" class="form-control" required>
                        <option value="">Select Company</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="warehouseCode">Warehouse Code *</label>
                    <input type="text" id="warehouseCode" class="form-control" required placeholder="e.g., WH001">
                </div>
                <div class="form-group">
                    <label for="warehouseName">Warehouse Name *</label>
                    <input type="text" id="warehouseName" class="form-control" required placeholder="e.g., Main Warehouse">
                </div>
                <div class="form-group">
                    <label for="warehouseAddress">Address (Optional)</label>
                    <input type="text" id="warehouseAddress" class="form-control" placeholder="e.g., 123 Main St, City">
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="closeWarehouseModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Bin Location Modal -->
    <div id="binLocationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="binLocationModalTitle">Add Bin Location</h3>
                <button class="modal-close" onclick="closeBinLocationModal()">&times;</button>
            </div>
            <form id="binLocationForm" onsubmit="handleBinLocationSubmit(event)">
                <div class="form-group">
                    <label for="binCode">Bin Code *</label>
                    <input type="text" id="binCode" class="form-control" required placeholder="e.g., A1">
                </div>
                <div class="form-group">
                    <label for="binName">Bin Name (Optional)</label>
                    <input type="text" id="binName" class="form-control">
                </div>
                <div class="form-group">
                    <label for="binWarehouse">Warehouse</label>
                    <select id="binWarehouse" class="form-control" required>
                        <option value="">Select Warehouse</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="binAisle">Aisle (Optional)</label>
                    <input type="text" id="binAisle" class="form-control">
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="closeBinLocationModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Manager Modal -->
    <div id="managerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="managerModalTitle">Add Manager</h3>
                <button class="modal-close" onclick="closeManagerModal()">&times;</button>
            </div>
            <form id="managerForm" onsubmit="handleManagerSubmit(event)">
                <div class="form-group">
                    <label for="managerName">Manager Name</label>
                    <input type="text" id="managerName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="managerEmail">Email (Optional)</label>
                    <input type="email" id="managerEmail" class="form-control">
                </div>
                <div class="form-group">
                    <label for="managerWarehouse">Warehouse</label>
                    <select id="managerWarehouse" class="form-control" required>
                        <option value="">Select Warehouse</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="closeManagerModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Manager-Company Access Modal -->
    <div id="managerCompanyAccessModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="managerCompanyAccessModalTitle">Add Manager-Company Access</h3>
                <button class="modal-close" onclick="closeManagerCompanyAccessModal()">&times;</button>
            </div>
            <form id="managerCompanyAccessForm" onsubmit="handleManagerCompanyAccessSubmit(event)">
                <div class="form-group">
                    <label for="accessManager">Manager</label>
                    <select id="accessManager" class="form-control" required>
                        <option value="">Select Manager</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="accessCompany">Company</label>
                    <select id="accessCompany" class="form-control" required>
                        <option value="">Select Company</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="closeManagerCompanyAccessModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Counter-Company Access Modal -->
    <div id="counterCompanyAccessModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="counterCompanyAccessModalTitle">Add Counter-Company Access</h3>
                <button class="modal-close" onclick="closeCounterCompanyAccessModal()">&times;</button>
            </div>
            <form id="counterCompanyAccessForm" onsubmit="handleCounterCompanyAccessSubmit(event)">
                <div class="form-group">
                    <label for="accessCounterEmail">Counter Email/Login</label>
                    <input type="email" id="accessCounterEmail" class="form-control" placeholder="user@example.com" required>
                </div>
                <div class="form-group">
                    <label for="accessCounterCompany">Company</label>
                    <select id="accessCounterCompany" class="form-control" required>
                        <option value="">Select Company</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="closeCounterCompanyAccessModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- QR Scanner Modal -->
    <div id="qrScannerModal" class="modal">
        <div class="modal-content qr-scanner-content">
            <div class="modal-header">
                <h3>Scan QR Code</h3>
                <button class="modal-close" onclick="stopQRScan()">&times;</button>
            </div>
            <div id="qr-reader" style="width:100%;"></div>
            <div id="qr-reader-results"></div>
            <p class="qr-hint">Position the QR code within the camera view</p>
        </div>
    </div>

    <!-- System Admin Button (Bottom Left) -->
    <button id="systemAdminBtn" class="system-admin-btn" onclick="showTab('systemAdmin')" title="System Admin">
        <span class="system-admin-icon">üîê</span>
        <span class="system-admin-label">Admin</span>
    </button>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
