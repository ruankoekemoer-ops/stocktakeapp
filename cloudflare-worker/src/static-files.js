/**
 * Static file content for the frontend
 * Auto-generated by build-static-files.js
 * DO NOT EDIT MANUALLY - Run: node build-static-files.js
 */

export const indexHtml = "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Stock Take Management System</title>\n    <link rel=\"stylesheet\" href=\"/css/style.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <header>\n            <h1>ðŸ“¦ Stock Take Management System</h1>\n            <p class=\"subtitle\">Scan, count, and submit inventory</p>\n        </header>\n\n        <nav class=\"tabs\">\n            <button class=\"tab-btn active\" onclick=\"showTab('setup')\">Setup</button>\n            <button class=\"tab-btn\" onclick=\"showTab('stocktake')\">Stock Take</button>\n            <button class=\"tab-btn\" onclick=\"showTab('view')\">View Items</button>\n        </nav>\n\n        <!-- Setup Tab -->\n        <div id=\"setupTab\" class=\"tab-content active\">\n            <div class=\"setup-container\">\n                <div class=\"setup-tabs\">\n                    <button class=\"setup-tab-btn active\" onclick=\"showSetupTab('companies')\">Companies</button>\n                    <button class=\"setup-tab-btn\" onclick=\"showSetupTab('warehouses')\">Warehouses</button>\n                    <button class=\"setup-tab-btn\" onclick=\"showSetupTab('bin-locations')\">Bin Locations</button>\n                    <button class=\"setup-tab-btn\" onclick=\"showSetupTab('managers')\">Managers</button>\n                </div>\n\n                <!-- Companies Setup -->\n                <div id=\"companiesSetup\" class=\"setup-content active\">\n                    <div class=\"setup-header\">\n                        <h2>Company Setup</h2>\n                        <button onclick=\"openCompanyModal()\" class=\"btn btn-primary\">+ Add Company</button>\n                    </div>\n                    <div id=\"companiesList\" class=\"items-list\"></div>\n                </div>\n\n                <!-- Warehouses Setup -->\n                <div id=\"warehousesSetup\" class=\"setup-content\">\n                    <div class=\"setup-header\">\n                        <h2>Warehouse Setup</h2>\n                        <button onclick=\"openWarehouseModal()\" class=\"btn btn-primary\">+ Add Warehouse</button>\n                    </div>\n                    <div class=\"filter-box\">\n                        <label>Filter by Company:</label>\n                        <select id=\"warehouseCompanyFilter\" onchange=\"loadWarehouses()\">\n                            <option value=\"\">All Companies</option>\n                        </select>\n                    </div>\n                    <div id=\"warehousesList\" class=\"items-list\"></div>\n                </div>\n\n                <!-- Bin Locations Setup -->\n                <div id=\"bin-locationsSetup\" class=\"setup-content\">\n                    <div class=\"setup-header\">\n                        <h2>Bin Location Setup</h2>\n                        <button onclick=\"openBinLocationModal()\" class=\"btn btn-primary\">+ Add Bin Location</button>\n                    </div>\n                    <div class=\"filter-box\">\n                        <label>Filter by Warehouse:</label>\n                        <select id=\"binLocationWarehouseFilter\" onchange=\"loadBinLocations()\">\n                            <option value=\"\">All Warehouses</option>\n                        </select>\n                    </div>\n                    <div id=\"binLocationsList\" class=\"items-list\"></div>\n                </div>\n\n                <!-- Managers Setup -->\n                <div id=\"managersSetup\" class=\"setup-content\">\n                    <div class=\"setup-header\">\n                        <h2>Warehouse Manager Setup</h2>\n                        <button onclick=\"openManagerModal()\" class=\"btn btn-primary\">+ Add Manager</button>\n                    </div>\n                    <div class=\"filter-box\">\n                        <label>Filter by Warehouse:</label>\n                        <select id=\"managerWarehouseFilter\" onchange=\"loadManagers()\">\n                            <option value=\"\">All Warehouses</option>\n                        </select>\n                    </div>\n                    <div id=\"managersList\" class=\"items-list\"></div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Stock Take Tab - NEW WORKFLOW -->\n        <div id=\"stocktakeTab\" class=\"tab-content\">\n            <div class=\"stock-take-workflow\">\n                <!-- Step 1: Open/Close Stock Take -->\n                <section class=\"workflow-section\">\n                    <h2>1. Manage Stock Take</h2>\n                    <div id=\"stockTakeStatus\" class=\"status-box\">\n                        <p>No stock take open</p>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group\">\n                            <label for=\"openStockTakeCompany\">Company *</label>\n                            <select id=\"openStockTakeCompany\" class=\"form-control\" required onchange=\"updateWarehousesForOpenStockTake()\">\n                                <option value=\"\">Select Company</option>\n                            </select>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"openStockTakeWarehouse\">Warehouse *</label>\n                            <select id=\"openStockTakeWarehouse\" class=\"form-control\" required>\n                                <option value=\"\">Select Warehouse</option>\n                            </select>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"openStockTakeManager\">Manager *</label>\n                            <select id=\"openStockTakeManager\" class=\"form-control\" required>\n                                <option value=\"\">Select Manager</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"button-group\">\n                        <button onclick=\"openStockTake()\" class=\"btn btn-primary\" id=\"openStockTakeBtn\">Open Stock Take</button>\n                        <button onclick=\"closeStockTake()\" class=\"btn btn-danger\" id=\"closeStockTakeBtn\" style=\"display: none;\">Close Stock Take</button>\n                    </div>\n                </section>\n\n                <!-- Step 2: Scan Bin Location -->\n                <section class=\"workflow-section\" id=\"binLocationSection\" style=\"display: none;\">\n                    <h2>2. Scan Bin Location</h2>\n                    <div id=\"currentBinLocation\" class=\"current-bin-box\" style=\"display: none;\">\n                        <h3>Current Bin: <span id=\"currentBinCode\"></span></h3>\n                        <p id=\"currentBinInfo\"></p>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"binLocationInput\">Bin Location Code (Scan QR or Enter) *</label>\n                        <div class=\"input-with-button\">\n                            <input \n                                type=\"text\" \n                                id=\"binLocationInput\" \n                                class=\"form-control\" \n                                placeholder=\"Scan QR code or enter bin code\"\n                                onkeypress=\"if(event.key==='Enter') handleBinLocationScan()\"\n                                autocomplete=\"off\"\n                            >\n                            <button onclick=\"handleBinLocationScan()\" class=\"btn btn-secondary\">âœ“</button>\n                        </div>\n                        <button onclick=\"clearBinLocation()\" class=\"btn btn-link\" id=\"clearBinBtn\" style=\"display: none;\">Clear Bin Location</button>\n                    </div>\n                </section>\n\n                <!-- Step 3: Scan Items -->\n                <section class=\"workflow-section\" id=\"itemScanSection\" style=\"display: none;\">\n                    <h2>3. Scan Items</h2>\n                    <div class=\"form-row\">\n                        <div class=\"form-group\">\n                            <label for=\"itemCodeInput\">Item Code (Scan QR) *</label>\n                            <input \n                                type=\"text\" \n                                id=\"itemCodeInput\" \n                                class=\"form-control\" \n                                placeholder=\"Scan QR code for item\"\n                                onkeypress=\"if(event.key==='Enter') handleItemCodeScan()\"\n                                autocomplete=\"off\"\n                            >\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"itemNameInput\">Item Name</label>\n                            <input \n                                type=\"text\" \n                                id=\"itemNameInput\" \n                                class=\"form-control\" \n                                placeholder=\"Auto-filled or enter manually\"\n                            >\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"itemQuantityInput\">Quantity *</label>\n                            <input \n                                type=\"number\" \n                                id=\"itemQuantityInput\" \n                                class=\"form-control\" \n                                min=\"0\" \n                                value=\"0\"\n                                required\n                            >\n                        </div>\n                        <div class=\"form-group\">\n                            <button onclick=\"addItemToBin()\" class=\"btn btn-primary\" style=\"margin-top: 25px;\">Add Item</button>\n                        </div>\n                    </div>\n                </section>\n\n                <!-- Step 4: Items in Current Bin -->\n                <section class=\"workflow-section\" id=\"binItemsSection\" style=\"display: none;\">\n                    <h2>4. Items in Current Bin</h2>\n                    <div id=\"binItemsList\" class=\"items-list\"></div>\n                    <div id=\"noBinItems\" class=\"no-items\" style=\"display: none;\">No items added yet. Scan items above.</div>\n                    <div class=\"button-group\" style=\"margin-top: 20px;\">\n                        <button onclick=\"submitBinLocation()\" class=\"btn btn-success\" id=\"submitBinBtn\">Submit Bin Location</button>\n                        <button onclick=\"clearBinItems()\" class=\"btn btn-secondary\">Clear All Items</button>\n                    </div>\n                </section>\n            </div>\n        </div>\n\n        <!-- View Items Tab -->\n        <div id=\"viewTab\" class=\"tab-content\">\n            <div class=\"view-container\">\n                <div class=\"view-header\">\n                    <h2>Stock Items</h2>\n                    <button onclick=\"loadItems()\" class=\"btn btn-secondary\">Refresh</button>\n                </div>\n                <div class=\"search-box\">\n                    <input\n                        type=\"text\"\n                        id=\"searchStockInput\"\n                        placeholder=\"Search items by name, code, or notes...\"\n                        class=\"search-input\"\n                        oninput=\"handleStockSearch()\"\n                    >\n                </div>\n                <div id=\"loadingStock\" class=\"loading\" style=\"display: none;\">\n                    <div class=\"spinner\"></div>\n                    <p>Loading items...</p>\n                </div>\n                <div id=\"errorStock\" class=\"error\" style=\"display: none;\"></div>\n                <div id=\"stockItemsContainer\" class=\"items-container\">\n                    <div id=\"stockItemsList\" class=\"items-list\">\n                        <!-- Stock items will be loaded here -->\n                    </div>\n                </div>\n                <div id=\"noStockItems\" class=\"no-items\" style=\"display: none;\">No stock items found.</div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Modals for Setup -->\n    <!-- Company Modals -->\n    <div id=\"addCompanyModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeAddCompanyModal()\">&times;</span>\n            <h2>Add Company</h2>\n            <form onsubmit=\"handleAddCompany(event)\">\n                <div class=\"form-group\">\n                    <label>Company Code *</label>\n                    <input type=\"text\" id=\"addCompanyCode\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Company Name *</label>\n                    <input type=\"text\" id=\"addCompanyName\" class=\"form-control\" required>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Add Company</button>\n            </form>\n        </div>\n    </div>\n\n    <div id=\"editCompanyModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeEditCompanyModal()\">&times;</span>\n            <h2>Edit Company</h2>\n            <form onsubmit=\"handleEditCompany(event)\">\n                <input type=\"hidden\" id=\"editCompanyId\">\n                <div class=\"form-group\">\n                    <label>Company Code *</label>\n                    <input type=\"text\" id=\"editCompanyCode\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Company Name *</label>\n                    <input type=\"text\" id=\"editCompanyName\" class=\"form-control\" required>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Update Company</button>\n            </form>\n        </div>\n    </div>\n\n    <!-- Warehouse Modals -->\n    <div id=\"addWarehouseModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeAddWarehouseModal()\">&times;</span>\n            <h2>Add Warehouse</h2>\n            <form onsubmit=\"handleAddWarehouse(event)\">\n                <div class=\"form-group\">\n                    <label>Company *</label>\n                    <select id=\"addWarehouseCompany\" class=\"form-control\" required>\n                        <option value=\"\">Select Company</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label>Warehouse Code *</label>\n                    <input type=\"text\" id=\"addWarehouseCode\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Warehouse Name *</label>\n                    <input type=\"text\" id=\"addWarehouseName\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Address</label>\n                    <textarea id=\"addWarehouseAddress\" class=\"form-control\" rows=\"2\"></textarea>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Add Warehouse</button>\n            </form>\n        </div>\n    </div>\n\n    <div id=\"editWarehouseModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeEditWarehouseModal()\">&times;</span>\n            <h2>Edit Warehouse</h2>\n            <form onsubmit=\"handleEditWarehouse(event)\">\n                <input type=\"hidden\" id=\"editWarehouseId\">\n                <div class=\"form-group\">\n                    <label>Company *</label>\n                    <select id=\"editWarehouseCompany\" class=\"form-control\" required>\n                        <option value=\"\">Select Company</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label>Warehouse Code *</label>\n                    <input type=\"text\" id=\"editWarehouseCode\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Warehouse Name *</label>\n                    <input type=\"text\" id=\"editWarehouseName\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Address</label>\n                    <textarea id=\"editWarehouseAddress\" class=\"form-control\" rows=\"2\"></textarea>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Update Warehouse</button>\n            </form>\n        </div>\n    </div>\n\n    <!-- Bin Location Modals -->\n    <div id=\"addBinLocationModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeAddBinLocationModal()\">&times;</span>\n            <h2>Add Bin Location</h2>\n            <form onsubmit=\"handleAddBinLocation(event)\">\n                <div class=\"form-group\">\n                    <label>Warehouse *</label>\n                    <select id=\"addBinLocationWarehouse\" class=\"form-control\" required>\n                        <option value=\"\">Select Warehouse</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label>Bin Code *</label>\n                    <input type=\"text\" id=\"addBinLocationCode\" class=\"form-control\" required placeholder=\"e.g., A-01-02-03\">\n                </div>\n                <div class=\"form-group\">\n                    <label>Bin Name</label>\n                    <input type=\"text\" id=\"addBinLocationName\" class=\"form-control\">\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group\">\n                        <label>Aisle</label>\n                        <input type=\"text\" id=\"addBinLocationAisle\" class=\"form-control\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label>Shelf</label>\n                        <input type=\"text\" id=\"addBinLocationShelf\" class=\"form-control\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label>Level</label>\n                        <input type=\"text\" id=\"addBinLocationLevel\" class=\"form-control\">\n                    </div>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Add Bin Location</button>\n            </form>\n        </div>\n    </div>\n\n    <div id=\"editBinLocationModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeEditBinLocationModal()\">&times;</span>\n            <h2>Edit Bin Location</h2>\n            <form onsubmit=\"handleEditBinLocation(event)\">\n                <input type=\"hidden\" id=\"editBinLocationId\">\n                <div class=\"form-group\">\n                    <label>Warehouse *</label>\n                    <select id=\"editBinLocationWarehouse\" class=\"form-control\" required>\n                        <option value=\"\">Select Warehouse</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label>Bin Code *</label>\n                    <input type=\"text\" id=\"editBinLocationCode\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Bin Name</label>\n                    <input type=\"text\" id=\"editBinLocationName\" class=\"form-control\">\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group\">\n                        <label>Aisle</label>\n                        <input type=\"text\" id=\"editBinLocationAisle\" class=\"form-control\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label>Shelf</label>\n                        <input type=\"text\" id=\"editBinLocationShelf\" class=\"form-control\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label>Level</label>\n                        <input type=\"text\" id=\"editBinLocationLevel\" class=\"form-control\">\n                    </div>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Update Bin Location</button>\n            </form>\n        </div>\n    </div>\n\n    <!-- Manager Modals -->\n    <div id=\"addManagerModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeAddManagerModal()\">&times;</span>\n            <h2>Add Manager</h2>\n            <form onsubmit=\"handleAddManager(event)\">\n                <div class=\"form-group\">\n                    <label>Warehouse *</label>\n                    <select id=\"addManagerWarehouse\" class=\"form-control\" required>\n                        <option value=\"\">Select Warehouse</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label>Manager Name *</label>\n                    <input type=\"text\" id=\"addManagerName\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Email</label>\n                    <input type=\"email\" id=\"addManagerEmail\" class=\"form-control\">\n                </div>\n                <div class=\"form-group\">\n                    <label>Phone</label>\n                    <input type=\"text\" id=\"addManagerPhone\" class=\"form-control\">\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Add Manager</button>\n            </form>\n        </div>\n    </div>\n\n    <div id=\"editManagerModal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n            <span class=\"close\" onclick=\"closeEditManagerModal()\">&times;</span>\n            <h2>Edit Manager</h2>\n            <form onsubmit=\"handleEditManager(event)\">\n                <input type=\"hidden\" id=\"editManagerId\">\n                <div class=\"form-group\">\n                    <label>Warehouse *</label>\n                    <select id=\"editManagerWarehouse\" class=\"form-control\" required>\n                        <option value=\"\">Select Warehouse</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label>Manager Name *</label>\n                    <input type=\"text\" id=\"editManagerName\" class=\"form-control\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label>Email</label>\n                    <input type=\"email\" id=\"editManagerEmail\" class=\"form-control\">\n                </div>\n                <div class=\"form-group\">\n                    <label>Phone</label>\n                    <input type=\"text\" id=\"editManagerPhone\" class=\"form-control\">\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Update Manager</button>\n            </form>\n        </div>\n    </div>\n\n    <script src=\"/js/config.js\"></script>\n    <script src=\"/js/app.js\"></script>\n</body>\n</html>\n\n</html>\n";

export const configJs = "/**\n * Configuration\n * Uses same domain as frontend - no CORS issues!\n */\n\nconst CONFIG = {\n    // API server URL - Same domain as frontend\n    apiUrl: window.location.origin + '/api',\n};\n\n// Make available globally\nwindow.CONFIG = CONFIG;";

export const appJs = "/**\n * Stock Take Management System\n * Complete warehouse inventory management with company, warehouse, bin location, and manager setup\n */\n\n// Global state\nlet allItems = [];\nlet filteredItems = [];\nlet companies = [];\nlet warehouses = [];\nlet binLocations = [];\nlet managers = [];\n\n/**\n * Initialize app\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n    console.log('Stock Take Management System initialized');\n    \n    // Load initial data\n    loadCompanies();\n    loadWarehouses();\n    loadBinLocations();\n    loadManagers();\n    \n    // Load items if on view tab\n    if (document.getElementById('viewTab')?.classList.contains('active')) {\n        loadItems();\n    }\n    \n    // Check for active stock take\n    checkActiveStockTake();\n});\n\n/**\n * Tab switching\n */\nfunction showTab(tabName, clickedElement) {\n    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));\n    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));\n    \n    document.getElementById(tabName + 'Tab').classList.add('active');\n    if (clickedElement) {\n        clickedElement.classList.add('active');\n    } else {\n        document.querySelectorAll('.tab-btn').forEach(btn => {\n            if (btn.textContent.toLowerCase().includes(tabName)) {\n                btn.classList.add('active');\n            }\n        });\n    }\n    \n    // Load data when switching tabs\n    if (tabName === 'setup') {\n        loadCompanies();\n        loadWarehouses();\n        loadBinLocations();\n        loadManagers();\n    } else if (tabName === 'view') {\n        loadItems();\n    }\n}\nwindow.showTab = showTab;\n\n/**\n * Setup tab switching\n */\nfunction showSetupTab(tabName) {\n    document.querySelectorAll('.setup-content').forEach(tab => tab.classList.remove('active'));\n    document.querySelectorAll('.setup-tab-btn').forEach(btn => btn.classList.remove('active'));\n    \n    document.getElementById(tabName + 'Setup').classList.add('active');\n    event.target.classList.add('active');\n    \n    // Load data for the selected setup tab\n    if (tabName === 'companies') loadCompanies();\n    else if (tabName === 'warehouses') loadWarehouses();\n    else if (tabName === 'bin-locations') loadBinLocations();\n    else if (tabName === 'managers') loadManagers();\n}\nwindow.showSetupTab = showSetupTab;\n\n// ========== COMPANIES ==========\nasync function loadCompanies() {\n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/companies`);\n        companies = await response.json();\n        \n        // Update dropdowns\n        updateCompanyDropdowns();\n        \n        // Display companies\n        const listEl = document.getElementById('companiesList');\n        if (listEl) {\n            listEl.innerHTML = companies.map(c => `\n                <div class=\"item-card\">\n                    <div class=\"item-header\">\n                        <h3>${escapeHtml(c.company_name)}</h3>\n                        <span class=\"item-id\">${escapeHtml(c.company_code)}</span>\n                    </div>\n                    <div class=\"item-actions\">\n                        <button onclick=\"editCompany(${c.id})\" class=\"btn btn-small\">Edit</button>\n                        <button onclick=\"deleteCompany(${c.id})\" class=\"btn btn-small btn-danger\">Delete</button>\n                    </div>\n                </div>\n            `).join('');\n        }\n    } catch (error) {\n        console.error('Error loading companies:', error);\n    }\n}\n\nfunction updateCompanyDropdowns() {\n    const selects = document.querySelectorAll('select[id*=\"Company\"], select[id*=\"company\"]');\n    selects.forEach(select => {\n        const currentValue = select.value;\n        select.innerHTML = '<option value=\"\">Select Company</option>' + \n            companies.map(c => `<option value=\"${c.id}\">${escapeHtml(c.company_name)}</option>`).join('');\n        if (currentValue) select.value = currentValue;\n    });\n}\n\nfunction openCompanyModal(id = null) {\n    if (id) {\n        openEditCompanyModal(id);\n    } else {\n        openAddCompanyModal();\n    }\n}\nwindow.openCompanyModal = openCompanyModal;\n\nfunction openAddCompanyModal() {\n    document.getElementById('addCompanyModal').style.display = 'flex';\n    document.getElementById('addCompanyCode').value = '';\n    document.getElementById('addCompanyName').value = '';\n}\nwindow.openAddCompanyModal = openAddCompanyModal;\n\nfunction closeAddCompanyModal() {\n    document.getElementById('addCompanyModal').style.display = 'none';\n}\nwindow.closeAddCompanyModal = closeAddCompanyModal;\n\nfunction openEditCompanyModal(id) {\n    const company = companies.find(c => c.id === id);\n    if (!company) return;\n    \n    document.getElementById('editCompanyId').value = id;\n    document.getElementById('editCompanyCode').value = company.company_code;\n    document.getElementById('editCompanyName').value = company.company_name;\n    document.getElementById('editCompanyModal').style.display = 'flex';\n}\nwindow.openEditCompanyModal = openEditCompanyModal;\n\nfunction closeEditCompanyModal() {\n    document.getElementById('editCompanyModal').style.display = 'none';\n}\nwindow.closeEditCompanyModal = closeEditCompanyModal;\n\nasync function handleAddCompany(event) {\n    event.preventDefault();\n    const formData = {\n        company_code: document.getElementById('addCompanyCode').value.trim(),\n        company_name: document.getElementById('addCompanyName').value.trim(),\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/companies`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to save company');\n        \n        alert('âœ… Company created successfully!');\n        closeAddCompanyModal();\n        loadCompanies();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleAddCompany = handleAddCompany;\n\nasync function handleEditCompany(event) {\n    event.preventDefault();\n    const id = document.getElementById('editCompanyId').value;\n    const formData = {\n        company_code: document.getElementById('editCompanyCode').value.trim(),\n        company_name: document.getElementById('editCompanyName').value.trim(),\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/companies/${id}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to update company');\n        \n        alert('âœ… Company updated successfully!');\n        closeEditCompanyModal();\n        loadCompanies();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleEditCompany = handleEditCompany;\n\nfunction editCompany(id) {\n    openCompanyModal(id);\n}\nwindow.editCompany = editCompany;\n\nasync function deleteCompany(id) {\n    if (!confirm('Are you sure you want to delete this company?')) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/companies/${id}`, { method: 'DELETE' });\n        if (!response.ok) throw new Error('Failed to delete company');\n        alert('âœ… Company deleted successfully!');\n        loadCompanies();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.deleteCompany = deleteCompany;\n\n// ========== WAREHOUSES ==========\nasync function loadWarehouses() {\n    try {\n        const companyFilter = document.getElementById('warehouseCompanyFilter')?.value || '';\n        const url = companyFilter ? `${CONFIG.apiUrl}/warehouses?company_id=${companyFilter}` : `${CONFIG.apiUrl}/warehouses`;\n        const response = await fetch(url);\n        warehouses = await response.json();\n        \n        updateWarehouseDropdowns();\n        \n        const listEl = document.getElementById('warehousesList');\n        if (listEl) {\n            listEl.innerHTML = warehouses.map(w => `\n                <div class=\"item-card\">\n                    <div class=\"item-header\">\n                        <h3>${escapeHtml(w.warehouse_name)}</h3>\n                        <span class=\"item-id\">${escapeHtml(w.warehouse_code)}</span>\n                    </div>\n                    <div class=\"item-details\">\n                        <div class=\"detail-item\"><strong>Company:</strong> ${escapeHtml(w.company_name || 'N/A')}</div>\n                        ${w.address ? `<div class=\"detail-item\"><strong>Address:</strong> ${escapeHtml(w.address)}</div>` : ''}\n                    </div>\n                    <div class=\"item-actions\">\n                        <button onclick=\"editWarehouse(${w.id})\" class=\"btn btn-small\">Edit</button>\n                        <button onclick=\"deleteWarehouse(${w.id})\" class=\"btn btn-small btn-danger\">Delete</button>\n                    </div>\n                </div>\n            `).join('');\n        }\n    } catch (error) {\n        console.error('Error loading warehouses:', error);\n    }\n}\nwindow.loadWarehouses = loadWarehouses;\n\nfunction updateWarehouseDropdowns() {\n    const selects = document.querySelectorAll('select[id*=\"Warehouse\"], select[id*=\"warehouse\"]');\n    selects.forEach(select => {\n        const currentValue = select.value;\n        const companyFilter = select.dataset.companyFilter;\n        let filteredWarehouses = warehouses;\n        \n        if (companyFilter && select.id !== 'warehouseCompanyFilter') {\n            filteredWarehouses = warehouses.filter(w => !companyFilter || w.company_id == companyFilter);\n        }\n        \n        select.innerHTML = '<option value=\"\">Select Warehouse</option>' + \n            filteredWarehouses.map(w => `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`).join('');\n        if (currentValue) select.value = currentValue;\n    });\n}\n\nfunction openWarehouseModal(id = null) {\n    if (id) {\n        openEditWarehouseModal(id);\n    } else {\n        openAddWarehouseModal();\n    }\n}\nwindow.openWarehouseModal = openWarehouseModal;\n\nfunction openAddWarehouseModal() {\n    const companySelect = document.getElementById('addWarehouseCompany');\n    companySelect.innerHTML = '<option value=\"\">Select Company</option>' + \n        companies.map(c => `<option value=\"${c.id}\">${escapeHtml(c.company_name)}</option>`).join('');\n    document.getElementById('addWarehouseCode').value = '';\n    document.getElementById('addWarehouseName').value = '';\n    document.getElementById('addWarehouseAddress').value = '';\n    document.getElementById('addWarehouseModal').style.display = 'flex';\n}\nwindow.openAddWarehouseModal = openAddWarehouseModal;\n\nfunction closeAddWarehouseModal() {\n    document.getElementById('addWarehouseModal').style.display = 'none';\n}\nwindow.closeAddWarehouseModal = closeAddWarehouseModal;\n\nfunction openEditWarehouseModal(id) {\n    const warehouse = warehouses.find(w => w.id === id);\n    if (!warehouse) return;\n    \n    const companySelect = document.getElementById('editWarehouseCompany');\n    companySelect.innerHTML = '<option value=\"\">Select Company</option>' + \n        companies.map(c => `<option value=\"${c.id}\">${escapeHtml(c.company_name)}</option>`).join('');\n    \n    document.getElementById('editWarehouseId').value = id;\n    document.getElementById('editWarehouseCode').value = warehouse.warehouse_code;\n    document.getElementById('editWarehouseName').value = warehouse.warehouse_name;\n    document.getElementById('editWarehouseCompany').value = warehouse.company_id;\n    document.getElementById('editWarehouseAddress').value = warehouse.address || '';\n    document.getElementById('editWarehouseModal').style.display = 'flex';\n}\nwindow.openEditWarehouseModal = openEditWarehouseModal;\n\nfunction closeEditWarehouseModal() {\n    document.getElementById('editWarehouseModal').style.display = 'none';\n}\nwindow.closeEditWarehouseModal = closeEditWarehouseModal;\n\nasync function handleAddWarehouse(event) {\n    event.preventDefault();\n    const formData = {\n        warehouse_code: document.getElementById('addWarehouseCode').value.trim(),\n        warehouse_name: document.getElementById('addWarehouseName').value.trim(),\n        company_id: parseInt(document.getElementById('addWarehouseCompany').value),\n        address: document.getElementById('addWarehouseAddress').value.trim() || null,\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/warehouses`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to save warehouse');\n        \n        alert('âœ… Warehouse created successfully!');\n        closeAddWarehouseModal();\n        loadWarehouses();\n        loadBinLocations();\n        loadManagers();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleAddWarehouse = handleAddWarehouse;\n\nasync function handleEditWarehouse(event) {\n    event.preventDefault();\n    const id = document.getElementById('editWarehouseId').value;\n    const formData = {\n        warehouse_code: document.getElementById('editWarehouseCode').value.trim(),\n        warehouse_name: document.getElementById('editWarehouseName').value.trim(),\n        company_id: parseInt(document.getElementById('editWarehouseCompany').value),\n        address: document.getElementById('editWarehouseAddress').value.trim() || null,\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/warehouses/${id}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to update warehouse');\n        \n        alert('âœ… Warehouse updated successfully!');\n        closeEditWarehouseModal();\n        loadWarehouses();\n        loadBinLocations();\n        loadManagers();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleEditWarehouse = handleEditWarehouse;\n\nfunction editWarehouse(id) {\n    openWarehouseModal(id);\n}\nwindow.editWarehouse = editWarehouse;\n\nasync function deleteWarehouse(id) {\n    if (!confirm('Are you sure you want to delete this warehouse? This will also delete associated bin locations and managers.')) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/warehouses/${id}`, { method: 'DELETE' });\n        if (!response.ok) throw new Error('Failed to delete warehouse');\n        alert('âœ… Warehouse deleted successfully!');\n        loadWarehouses();\n        loadBinLocations();\n        loadManagers();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.deleteWarehouse = deleteWarehouse;\n\n// ========== BIN LOCATIONS ==========\nasync function loadBinLocations() {\n    try {\n        const warehouseFilter = document.getElementById('binLocationWarehouseFilter')?.value || '';\n        const url = warehouseFilter ? `${CONFIG.apiUrl}/bin-locations?warehouse_id=${warehouseFilter}` : `${CONFIG.apiUrl}/bin-locations`;\n        const response = await fetch(url);\n        binLocations = await response.json();\n        \n        updateBinLocationDropdowns();\n        \n        const listEl = document.getElementById('binLocationsList');\n        if (listEl) {\n            listEl.innerHTML = binLocations.map(b => `\n                <div class=\"item-card\">\n                    <div class=\"item-header\">\n                        <h3>${escapeHtml(b.bin_code)}</h3>\n                        ${b.bin_name ? `<span class=\"item-id\">${escapeHtml(b.bin_name)}</span>` : ''}\n                    </div>\n                    <div class=\"item-details\">\n                        <div class=\"detail-item\"><strong>Warehouse:</strong> ${escapeHtml(b.warehouse_name || 'N/A')}</div>\n                        ${b.aisle ? `<div class=\"detail-item\"><strong>Aisle:</strong> ${escapeHtml(b.aisle)}</div>` : ''}\n                        ${b.shelf ? `<div class=\"detail-item\"><strong>Shelf:</strong> ${escapeHtml(b.shelf)}</div>` : ''}\n                        ${b.level ? `<div class=\"detail-item\"><strong>Level:</strong> ${escapeHtml(b.level)}</div>` : ''}\n                    </div>\n                    <div class=\"item-actions\">\n                        <button onclick=\"editBinLocation(${b.id})\" class=\"btn btn-small\">Edit</button>\n                        <button onclick=\"deleteBinLocation(${b.id})\" class=\"btn btn-small btn-danger\">Delete</button>\n                    </div>\n                </div>\n            `).join('');\n        }\n    } catch (error) {\n        console.error('Error loading bin locations:', error);\n    }\n}\nwindow.loadBinLocations = loadBinLocations;\n\nfunction updateBinLocationDropdowns() {\n    const selects = document.querySelectorAll('select[id*=\"Bin\"], select[id*=\"bin\"]');\n    selects.forEach(select => {\n        if (select.id === 'binLocationWarehouseFilter') return;\n        const currentValue = select.value;\n        const warehouseFilter = select.dataset.warehouseFilter;\n        let filteredBins = binLocations;\n        \n        if (warehouseFilter) {\n            filteredBins = binLocations.filter(b => b.warehouse_id == warehouseFilter);\n        }\n        \n        select.innerHTML = '<option value=\"\">Select Bin Location</option>' + \n            filteredBins.map(b => `<option value=\"${b.id}\">${escapeHtml(b.bin_code)}${b.bin_name ? ' - ' + escapeHtml(b.bin_name) : ''}</option>`).join('');\n        if (currentValue) select.value = currentValue;\n    });\n}\n\nfunction openBinLocationModal(id = null) {\n    if (id) {\n        openEditBinLocationModal(id);\n    } else {\n        openAddBinLocationModal();\n    }\n}\nwindow.openBinLocationModal = openBinLocationModal;\n\nfunction openAddBinLocationModal() {\n    const warehouseSelect = document.getElementById('addBinLocationWarehouse');\n    warehouseSelect.innerHTML = '<option value=\"\">Select Warehouse</option>' + \n        warehouses.map(w => `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`).join('');\n    document.getElementById('addBinLocationCode').value = '';\n    document.getElementById('addBinLocationName').value = '';\n    document.getElementById('addBinLocationAisle').value = '';\n    document.getElementById('addBinLocationShelf').value = '';\n    document.getElementById('addBinLocationLevel').value = '';\n    document.getElementById('addBinLocationModal').style.display = 'flex';\n}\nwindow.openAddBinLocationModal = openAddBinLocationModal;\n\nfunction closeAddBinLocationModal() {\n    document.getElementById('addBinLocationModal').style.display = 'none';\n}\nwindow.closeAddBinLocationModal = closeAddBinLocationModal;\n\nfunction openEditBinLocationModal(id) {\n    const bin = binLocations.find(b => b.id === id);\n    if (!bin) return;\n    \n    const warehouseSelect = document.getElementById('editBinLocationWarehouse');\n    warehouseSelect.innerHTML = '<option value=\"\">Select Warehouse</option>' + \n        warehouses.map(w => `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`).join('');\n    \n    document.getElementById('editBinLocationId').value = id;\n    document.getElementById('editBinLocationCode').value = bin.bin_code;\n    document.getElementById('editBinLocationName').value = bin.bin_name || '';\n    document.getElementById('editBinLocationWarehouse').value = bin.warehouse_id;\n    document.getElementById('editBinLocationAisle').value = bin.aisle || '';\n    document.getElementById('editBinLocationShelf').value = bin.shelf || '';\n    document.getElementById('editBinLocationLevel').value = bin.level || '';\n    document.getElementById('editBinLocationModal').style.display = 'flex';\n}\nwindow.openEditBinLocationModal = openEditBinLocationModal;\n\nfunction closeEditBinLocationModal() {\n    document.getElementById('editBinLocationModal').style.display = 'none';\n}\nwindow.closeEditBinLocationModal = closeEditBinLocationModal;\n\nasync function handleAddBinLocation(event) {\n    event.preventDefault();\n    const formData = {\n        bin_code: document.getElementById('addBinLocationCode').value.trim(),\n        bin_name: document.getElementById('addBinLocationName').value.trim() || null,\n        warehouse_id: parseInt(document.getElementById('addBinLocationWarehouse').value),\n        aisle: document.getElementById('addBinLocationAisle').value.trim() || null,\n        shelf: document.getElementById('addBinLocationShelf').value.trim() || null,\n        level: document.getElementById('addBinLocationLevel').value.trim() || null,\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-locations`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to save bin location');\n        \n        alert('âœ… Bin location created successfully!');\n        closeAddBinLocationModal();\n        loadBinLocations();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleAddBinLocation = handleAddBinLocation;\n\nasync function handleEditBinLocation(event) {\n    event.preventDefault();\n    const id = document.getElementById('editBinLocationId').value;\n    const formData = {\n        bin_code: document.getElementById('editBinLocationCode').value.trim(),\n        bin_name: document.getElementById('editBinLocationName').value.trim() || null,\n        warehouse_id: parseInt(document.getElementById('editBinLocationWarehouse').value),\n        aisle: document.getElementById('editBinLocationAisle').value.trim() || null,\n        shelf: document.getElementById('editBinLocationShelf').value.trim() || null,\n        level: document.getElementById('editBinLocationLevel').value.trim() || null,\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-locations/${id}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to update bin location');\n        \n        alert('âœ… Bin location updated successfully!');\n        closeEditBinLocationModal();\n        loadBinLocations();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleEditBinLocation = handleEditBinLocation;\n\nfunction editBinLocation(id) {\n    openBinLocationModal(id);\n}\nwindow.editBinLocation = editBinLocation;\n\nasync function deleteBinLocation(id) {\n    if (!confirm('Are you sure you want to delete this bin location?')) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-locations/${id}`, { method: 'DELETE' });\n        if (!response.ok) throw new Error('Failed to delete bin location');\n        alert('âœ… Bin location deleted successfully!');\n        loadBinLocations();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.deleteBinLocation = deleteBinLocation;\n\n// ========== MANAGERS ==========\nasync function loadManagers() {\n    try {\n        const warehouseFilter = document.getElementById('managerWarehouseFilter')?.value || '';\n        const url = warehouseFilter ? `${CONFIG.apiUrl}/managers?warehouse_id=${warehouseFilter}` : `${CONFIG.apiUrl}/managers`;\n        const response = await fetch(url);\n        managers = await response.json();\n        \n        updateManagerDropdowns();\n        \n        const listEl = document.getElementById('managersList');\n        if (listEl) {\n            listEl.innerHTML = managers.map(m => `\n                <div class=\"item-card\">\n                    <div class=\"item-header\">\n                        <h3>${escapeHtml(m.manager_name)}</h3>\n                        <span class=\"item-id\">${escapeHtml(m.warehouse_name || 'N/A')}</span>\n                    </div>\n                    <div class=\"item-details\">\n                        <div class=\"detail-item\"><strong>Warehouse:</strong> ${escapeHtml(m.warehouse_name || 'N/A')}</div>\n                        ${m.email ? `<div class=\"detail-item\"><strong>Email:</strong> ${escapeHtml(m.email)}</div>` : ''}\n                        ${m.phone ? `<div class=\"detail-item\"><strong>Phone:</strong> ${escapeHtml(m.phone)}</div>` : ''}\n                    </div>\n                    <div class=\"item-actions\">\n                        <button onclick=\"editManager(${m.id})\" class=\"btn btn-small\">Edit</button>\n                        <button onclick=\"deleteManager(${m.id})\" class=\"btn btn-small btn-danger\">Delete</button>\n                    </div>\n                </div>\n            `).join('');\n        }\n    } catch (error) {\n        console.error('Error loading managers:', error);\n    }\n}\nwindow.loadManagers = loadManagers;\n\nfunction updateManagerDropdowns() {\n    const selects = document.querySelectorAll('select[id*=\"Manager\"], select[id*=\"manager\"]');\n    selects.forEach(select => {\n        if (select.id === 'managerWarehouseFilter') return;\n        const currentValue = select.value;\n        const warehouseFilter = select.dataset.warehouseFilter;\n        let filteredManagers = managers;\n        \n        if (warehouseFilter) {\n            filteredManagers = managers.filter(m => m.warehouse_id == warehouseFilter);\n        }\n        \n        select.innerHTML = '<option value=\"\">Select Manager</option>' + \n            filteredManagers.map(m => `<option value=\"${m.id}\">${escapeHtml(m.manager_name)} - ${escapeHtml(m.warehouse_name || 'N/A')}</option>`).join('');\n        if (currentValue) select.value = currentValue;\n    });\n}\n\nfunction openManagerModal(id = null) {\n    if (id) {\n        openEditManagerModal(id);\n    } else {\n        openAddManagerModal();\n    }\n}\nwindow.openManagerModal = openManagerModal;\n\nfunction openAddManagerModal() {\n    const warehouseSelect = document.getElementById('addManagerWarehouse');\n    warehouseSelect.innerHTML = '<option value=\"\">Select Warehouse</option>' + \n        warehouses.map(w => `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`).join('');\n    document.getElementById('addManagerName').value = '';\n    document.getElementById('addManagerEmail').value = '';\n    document.getElementById('addManagerPhone').value = '';\n    document.getElementById('addManagerModal').style.display = 'flex';\n}\nwindow.openAddManagerModal = openAddManagerModal;\n\nfunction closeAddManagerModal() {\n    document.getElementById('addManagerModal').style.display = 'none';\n}\nwindow.closeAddManagerModal = closeAddManagerModal;\n\nfunction openEditManagerModal(id) {\n    const manager = managers.find(m => m.id === id);\n    if (!manager) return;\n    \n    const warehouseSelect = document.getElementById('editManagerWarehouse');\n    warehouseSelect.innerHTML = '<option value=\"\">Select Warehouse</option>' + \n        warehouses.map(w => `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`).join('');\n    \n    document.getElementById('editManagerId').value = id;\n    document.getElementById('editManagerName').value = manager.manager_name;\n    document.getElementById('editManagerWarehouse').value = manager.warehouse_id;\n    document.getElementById('editManagerEmail').value = manager.email || '';\n    document.getElementById('editManagerPhone').value = manager.phone || '';\n    document.getElementById('editManagerModal').style.display = 'flex';\n}\nwindow.openEditManagerModal = openEditManagerModal;\n\nfunction closeEditManagerModal() {\n    document.getElementById('editManagerModal').style.display = 'none';\n}\nwindow.closeEditManagerModal = closeEditManagerModal;\n\nasync function handleAddManager(event) {\n    event.preventDefault();\n    const formData = {\n        manager_name: document.getElementById('addManagerName').value.trim(),\n        warehouse_id: parseInt(document.getElementById('addManagerWarehouse').value),\n        email: document.getElementById('addManagerEmail').value.trim() || null,\n        phone: document.getElementById('addManagerPhone').value.trim() || null,\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/managers`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to save manager');\n        \n        alert('âœ… Manager created successfully!');\n        closeAddManagerModal();\n        loadManagers();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleAddManager = handleAddManager;\n\nasync function handleEditManager(event) {\n    event.preventDefault();\n    const id = document.getElementById('editManagerId').value;\n    const formData = {\n        manager_name: document.getElementById('editManagerName').value.trim(),\n        warehouse_id: parseInt(document.getElementById('editManagerWarehouse').value),\n        email: document.getElementById('editManagerEmail').value.trim() || null,\n        phone: document.getElementById('editManagerPhone').value.trim() || null,\n    };\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/managers/${id}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to update manager');\n        \n        alert('âœ… Manager updated successfully!');\n        closeEditManagerModal();\n        loadManagers();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleEditManager = handleEditManager;\n\nfunction editManager(id) {\n    openManagerModal(id);\n}\nwindow.editManager = editManager;\n\nasync function deleteManager(id) {\n    if (!confirm('Are you sure you want to deactivate this manager?')) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/managers/${id}`, { method: 'DELETE' });\n        if (!response.ok) throw new Error('Failed to deactivate manager');\n        alert('âœ… Manager deactivated successfully!');\n        loadManagers();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.deleteManager = deleteManager;\n\n// ========== STOCK TAKE ==========\nfunction updateWarehousesForStock() {\n    const companyId = document.getElementById('stockCompany').value;\n    const warehouseSelect = document.getElementById('stockWarehouse');\n    \n    warehouseSelect.innerHTML = '<option value=\"\">Select Warehouse</option>';\n    if (companyId) {\n        const companyWarehouses = warehouses.filter(w => w.company_id == companyId);\n        companyWarehouses.forEach(w => {\n            warehouseSelect.innerHTML += `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`;\n        });\n    }\n    \n    // Clear dependent fields\n    document.getElementById('stockWarehouse').value = '';\n    updateManagersAndBins();\n}\nwindow.updateWarehousesForStock = updateWarehousesForStock;\n\nfunction updateManagersAndBins() {\n    const warehouseId = document.getElementById('stockWarehouse').value;\n    const managerSelect = document.getElementById('stockManager');\n    const binSelect = document.getElementById('stockBinLocation');\n    \n    // Update managers (only for selected warehouse)\n    managerSelect.innerHTML = '<option value=\"\">Select Manager</option>';\n    if (warehouseId) {\n        const warehouseManagers = managers.filter(m => m.warehouse_id == warehouseId);\n        warehouseManagers.forEach(m => {\n            managerSelect.innerHTML += `<option value=\"${m.id}\">${escapeHtml(m.manager_name)}</option>`;\n        });\n    }\n    \n    // Update bin locations (only for selected warehouse)\n    binSelect.innerHTML = '<option value=\"\">Select Bin Location</option>';\n    if (warehouseId) {\n        const warehouseBins = binLocations.filter(b => b.warehouse_id == warehouseId);\n        warehouseBins.forEach(b => {\n            binSelect.innerHTML += `<option value=\"${b.id}\">${escapeHtml(b.bin_code)}${b.bin_name ? ' - ' + escapeHtml(b.bin_name) : ''}</option>`;\n        });\n    }\n}\nwindow.updateManagersAndBins = updateManagersAndBins;\n\nasync function handleStockTake(event) {\n    event.preventDefault();\n    \n    const btn = document.getElementById('stockTakeBtn');\n    const text = document.getElementById('stockTakeText');\n    const spinner = document.getElementById('stockTakeSpinner');\n    const result = document.getElementById('stockTakeResult');\n    \n    const formData = {\n        item_name: document.getElementById('stockItemName').value.trim(),\n        item_code: document.getElementById('stockItemCode').value.trim() || null,\n        quantity: parseInt(document.getElementById('stockQuantity').value) || 0,\n        company_id: parseInt(document.getElementById('stockCompany').value),\n        warehouse_id: parseInt(document.getElementById('stockWarehouse').value),\n        counted_by_manager_id: parseInt(document.getElementById('stockManager').value),\n        bin_location_id: document.getElementById('stockBinLocation').value ? parseInt(document.getElementById('stockBinLocation').value) : null,\n        date: document.getElementById('stockDate').value || null,\n        notes: document.getElementById('stockNotes').value.trim() || null,\n    };\n    \n    btn.disabled = true;\n    text.style.display = 'none';\n    spinner.style.display = 'inline';\n    result.style.display = 'none';\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/items`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to add item');\n        }\n        \n        result.style.display = 'block';\n        result.className = 'result-message success';\n        result.textContent = `âœ… Successfully added item \"${formData.item_name}\"!`;\n        \n        document.getElementById('stockTakeForm').reset();\n        document.getElementById('stockDate').value = new Date().toISOString().split('T')[0];\n        \n    } catch (error) {\n        result.style.display = 'block';\n        result.className = 'result-message error';\n        result.textContent = `âŒ Error: ${error.message}`;\n    } finally {\n        btn.disabled = false;\n        text.style.display = 'inline';\n        spinner.style.display = 'none';\n    }\n}\nwindow.handleStockTake = handleStockTake;\n\n// ========== VIEW ITEMS ==========\nasync function loadItems() {\n    const loadingEl = document.getElementById('loadingStock');\n    const errorEl = document.getElementById('errorStock');\n    const itemsListEl = document.getElementById('stockItemsList');\n    const noItemsEl = document.getElementById('noStockItems');\n    \n    if (loadingEl) loadingEl.style.display = 'block';\n    if (errorEl) errorEl.style.display = 'none';\n    if (itemsListEl) itemsListEl.innerHTML = '';\n    \n    try {\n        const searchTerm = document.getElementById('searchStockInput')?.value || '';\n        \n        let url = `${CONFIG.apiUrl}/items`;\n        if (searchTerm) {\n            url += `?search=${encodeURIComponent(searchTerm)}`;\n        }\n        \n        const response = await fetch(url);\n        if (!response.ok) throw new Error(`Server error: ${response.status}`);\n        \n        allItems = await response.json();\n        filteredItems = [...allItems];\n        \n        displayItems(filteredItems);\n        \n    } catch (error) {\n        console.error('Error loading items:', error);\n        if (errorEl) {\n            errorEl.style.display = 'block';\n            errorEl.textContent = `Error loading items: ${error.message}`;\n        }\n    } finally {\n        if (loadingEl) loadingEl.style.display = 'none';\n    }\n}\nwindow.loadItems = loadItems;\n\nfunction updateViewFilters() {\n    // Update warehouse filter\n    const warehouseFilter = document.getElementById('viewWarehouseFilter');\n    if (warehouseFilter) {\n        const currentValue = warehouseFilter.value;\n        warehouseFilter.innerHTML = '<option value=\"\">All Warehouses</option>' + \n            warehouses.map(w => `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`).join('');\n        if (currentValue) warehouseFilter.value = currentValue;\n    }\n    \n    // Update manager filter\n    const managerFilter = document.getElementById('viewManagerFilter');\n    if (managerFilter) {\n        const currentValue = managerFilter.value;\n        managerFilter.innerHTML = '<option value=\"\">All Managers</option>' + \n            managers.map(m => `<option value=\"${m.id}\">${escapeHtml(m.manager_name)}</option>`).join('');\n        if (currentValue) managerFilter.value = currentValue;\n    }\n}\n\nfunction displayItems(items) {\n    const itemsListEl = document.getElementById('stockItemsList');\n    const noItemsEl = document.getElementById('noStockItems');\n    \n    if (!itemsListEl) return;\n    \n    if (items.length === 0) {\n        itemsListEl.innerHTML = '';\n        if (noItemsEl) noItemsEl.style.display = 'block';\n        return;\n    }\n    \n    if (noItemsEl) noItemsEl.style.display = 'none';\n    \n    itemsListEl.innerHTML = items.map(item => `\n        <div class=\"item-card\">\n            <div class=\"item-header\">\n                <h3>${escapeHtml(item.item_name || 'Unnamed Item')}</h3>\n                <span class=\"item-id\">ID: ${item.id}</span>\n            </div>\n            <div class=\"item-details\">\n                <div class=\"detail-item\">\n                    <strong>Quantity:</strong> <span class=\"quantity-badge\">${item.quantity || 0}</span>\n                </div>\n                ${item.item_code ? `<div class=\"detail-item\"><strong>Item Code:</strong> ${escapeHtml(item.item_code)}</div>` : ''}\n                <div class=\"detail-item\"><strong>Company:</strong> ${escapeHtml(item.company_name || 'N/A')}</div>\n                <div class=\"detail-item\"><strong>Warehouse:</strong> ${escapeHtml(item.warehouse_name || 'N/A')}</div>\n                ${item.bin_location_code ? `<div class=\"detail-item\"><strong>Bin Location:</strong> ${escapeHtml(item.bin_location_code)}</div>` : ''}\n                ${item.counted_by ? `<div class=\"detail-item\"><strong>Counted By:</strong> ${escapeHtml(item.counted_by)}</div>` : ''}\n                ${item.date ? `<div class=\"detail-item\"><strong>Date:</strong> ${escapeHtml(item.date)}</div>` : ''}\n                ${item.notes ? `<div class=\"detail-item\"><strong>Notes:</strong> ${escapeHtml(item.notes)}</div>` : ''}\n                ${item.created_at ? `<div class=\"detail-item\"><strong>Added:</strong> ${formatDate(item.created_at)}</div>` : ''}\n            </div>\n        </div>\n    `).join('');\n}\n\nfunction handleStockSearch() {\n    loadItems(); // Reload with search term\n}\nwindow.handleStockSearch = handleStockSearch;\n\nfunction openEditItemModal(itemId) {\n    const item = allItems.find(i => i.id === itemId);\n    if (!item) return;\n    \n    document.getElementById('editItemId').value = item.id;\n    document.getElementById('editItemName').value = item.item_name || '';\n    document.getElementById('editItemCode').value = item.item_code || '';\n    document.getElementById('editQuantity').value = item.quantity || 0;\n    \n    document.getElementById('editItemModal').style.display = 'flex';\n}\nwindow.openEditItemModal = openEditItemModal;\n\nfunction closeEditItemModal() {\n    document.getElementById('editItemModal').style.display = 'none';\n}\nwindow.closeEditItemModal = closeEditItemModal;\n\nasync function handleUpdateItem(event) {\n    event.preventDefault();\n    \n    const itemId = document.getElementById('editItemId').value;\n    const formData = {\n        item_name: document.getElementById('editItemName').value.trim(),\n        item_code: document.getElementById('editItemCode').value.trim() || null,\n        quantity: parseInt(document.getElementById('editQuantity').value) || 0,\n    };\n    \n    // Get existing item to preserve other fields\n    const existing = allItems.find(i => i.id == itemId);\n    if (existing) {\n        formData.company_id = existing.company_id;\n        formData.warehouse_id = existing.warehouse_id;\n        formData.bin_location_id = existing.bin_location_id;\n        formData.counted_by_manager_id = existing.counted_by_manager_id;\n        formData.date = existing.date;\n        formData.notes = existing.notes;\n    }\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/items/${itemId}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(formData)\n        });\n        \n        if (!response.ok) throw new Error('Failed to update item');\n        \n        alert('âœ… Item updated successfully!');\n        closeEditItemModal();\n        loadItems();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\ndocument.getElementById('editItemForm').onsubmit = handleUpdateItem;\n\nasync function deleteItem(itemId) {\n    if (!confirm('Are you sure you want to delete this item?')) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/items/${itemId}`, { method: 'DELETE' });\n        if (!response.ok) throw new Error('Failed to delete item');\n        alert('âœ… Item deleted successfully!');\n        loadItems();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.deleteItem = deleteItem;\n\n// ========== NEW STOCK TAKE WORKFLOW ==========\nlet currentStockTake = null;\nlet currentBinLocation = null;\nlet currentBinItems = [];\n\nasync function checkActiveStockTake() {\n    // This will be called when stock take tab is opened\n    // For now, just initialize\n}\n\nfunction updateWarehousesForOpenStockTake() {\n    const companyId = document.getElementById('openStockTakeCompany').value;\n    const warehouseSelect = document.getElementById('openStockTakeWarehouse');\n    \n    warehouseSelect.innerHTML = '<option value=\"\">Select Warehouse</option>';\n    if (companyId) {\n        const companyWarehouses = warehouses.filter(w => w.company_id == companyId);\n        companyWarehouses.forEach(w => {\n            warehouseSelect.innerHTML += `<option value=\"${w.id}\">${escapeHtml(w.warehouse_name)}</option>`;\n        });\n    }\n    \n    // Clear manager dropdown\n    document.getElementById('openStockTakeManager').innerHTML = '<option value=\"\">Select Manager</option>';\n}\nwindow.updateWarehousesForOpenStockTake = updateWarehousesForOpenStockTake;\n\n// Update managers when warehouse changes\ndocument.getElementById('openStockTakeWarehouse')?.addEventListener('change', function() {\n    const warehouseId = this.value;\n    const managerSelect = document.getElementById('openStockTakeManager');\n    \n    managerSelect.innerHTML = '<option value=\"\">Select Manager</option>';\n    if (warehouseId) {\n        const warehouseManagers = managers.filter(m => m.warehouse_id == warehouseId);\n        warehouseManagers.forEach(m => {\n            managerSelect.innerHTML += `<option value=\"${m.id}\">${escapeHtml(m.manager_name)}</option>`;\n        });\n    }\n});\n\nasync function openStockTake() {\n    const companyId = document.getElementById('openStockTakeCompany').value;\n    const warehouseId = document.getElementById('openStockTakeWarehouse').value;\n    const managerId = document.getElementById('openStockTakeManager').value;\n    \n    if (!companyId || !warehouseId || !managerId) {\n        alert('Please select Company, Warehouse, and Manager');\n        return;\n    }\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/stock-takes`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                company_id: parseInt(companyId),\n                warehouse_id: parseInt(warehouseId),\n                opened_by_manager_id: parseInt(managerId)\n            })\n        });\n        \n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to open stock take');\n        }\n        \n        const data = await response.json();\n        currentStockTake = data.stockTake;\n        \n        updateStockTakeStatus();\n        alert('âœ… Stock take opened successfully!');\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.openStockTake = openStockTake;\n\nasync function closeStockTake() {\n    if (!currentStockTake || !confirm('Are you sure you want to close this stock take?')) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/stock-takes/${currentStockTake.id}/close`, {\n            method: 'PUT'\n        });\n        \n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to close stock take');\n        }\n        \n        currentStockTake = null;\n        currentBinLocation = null;\n        currentBinItems = [];\n        \n        updateStockTakeStatus();\n        clearBinLocation();\n        alert('âœ… Stock take closed successfully!');\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.closeStockTake = closeStockTake;\n\nfunction updateStockTakeStatus() {\n    const statusBox = document.getElementById('stockTakeStatus');\n    const openBtn = document.getElementById('openStockTakeBtn');\n    const closeBtn = document.getElementById('closeStockTakeBtn');\n    const binSection = document.getElementById('binLocationSection');\n    const itemSection = document.getElementById('itemScanSection');\n    const binItemsSection = document.getElementById('binItemsSection');\n    \n    if (currentStockTake) {\n        statusBox.innerHTML = `\n            <p><strong>Stock Take Open</strong></p>\n            <p>Company: ${escapeHtml(currentStockTake.company_name)}</p>\n            <p>Warehouse: ${escapeHtml(currentStockTake.warehouse_name)}</p>\n            <p>Opened: ${formatDate(currentStockTake.opened_at)}</p>\n        `;\n        statusBox.className = 'status-box success';\n        openBtn.style.display = 'none';\n        closeBtn.style.display = 'inline-block';\n        binSection.style.display = 'block';\n    } else {\n        statusBox.innerHTML = '<p>No stock take open</p>';\n        statusBox.className = 'status-box';\n        openBtn.style.display = 'inline-block';\n        closeBtn.style.display = 'none';\n        binSection.style.display = 'none';\n        itemSection.style.display = 'none';\n        binItemsSection.style.display = 'none';\n    }\n}\n\nasync function handleBinLocationScan() {\n    const binCode = document.getElementById('binLocationInput').value.trim();\n    \n    if (!binCode) {\n        alert('Please enter or scan a bin location code');\n        return;\n    }\n    \n    if (!currentStockTake) {\n        alert('Please open a stock take first');\n        return;\n    }\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-locations/lookup?bin_code=${encodeURIComponent(binCode)}&stock_take_id=${currentStockTake.id}`);\n        \n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Bin location not found or invalid');\n        }\n        \n        const binLocation = await response.json();\n        currentBinLocation = binLocation;\n        \n        // Show bin location info\n        document.getElementById('currentBinCode').textContent = binLocation.bin_code;\n        document.getElementById('currentBinInfo').textContent = `${binLocation.warehouse_name} - ${binLocation.company_name}`;\n        document.getElementById('currentBinLocation').style.display = 'block';\n        document.getElementById('clearBinBtn').style.display = 'inline-block';\n        \n        // Show item scan section\n        document.getElementById('itemScanSection').style.display = 'block';\n        document.getElementById('binItemsSection').style.display = 'block';\n        \n        // Focus on item code input\n        document.getElementById('itemCodeInput').focus();\n        \n        // Load items for this bin\n        loadBinItems();\n        \n        // Clear bin location input\n        document.getElementById('binLocationInput').value = '';\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.handleBinLocationScan = handleBinLocationScan;\n\nfunction clearBinLocation() {\n    if (confirm('Clear current bin location? All unsaved items will be lost.')) {\n        currentBinLocation = null;\n        currentBinItems = [];\n        \n        document.getElementById('currentBinLocation').style.display = 'none';\n        document.getElementById('clearBinBtn').style.display = 'none';\n        document.getElementById('itemScanSection').style.display = 'none';\n        document.getElementById('binItemsSection').style.display = 'none';\n        document.getElementById('binItemsList').innerHTML = '';\n        document.getElementById('itemCodeInput').value = '';\n        document.getElementById('itemNameInput').value = '';\n        document.getElementById('itemQuantityInput').value = '0';\n    }\n}\nwindow.clearBinLocation = clearBinLocation;\n\nasync function handleItemCodeScan() {\n    const itemCode = document.getElementById('itemCodeInput').value.trim();\n    \n    if (!itemCode) {\n        alert('Please enter or scan an item code');\n        return;\n    }\n    \n    // Auto-focus on quantity input\n    document.getElementById('itemQuantityInput').focus();\n    document.getElementById('itemQuantityInput').select();\n}\nwindow.handleItemCodeScan = handleItemCodeScan;\n\n// Allow Enter key on item code to move to quantity\ndocument.getElementById('itemCodeInput')?.addEventListener('keypress', function(e) {\n    if (e.key === 'Enter') {\n        e.preventDefault();\n        handleItemCodeScan();\n    }\n});\n\nasync function addItemToBin() {\n    if (!currentStockTake || !currentBinLocation) {\n        alert('Please scan a bin location first');\n        return;\n    }\n    \n    const itemCode = document.getElementById('itemCodeInput').value.trim();\n    const itemName = document.getElementById('itemNameInput').value.trim();\n    const quantity = parseInt(document.getElementById('itemQuantityInput').value) || 0;\n    \n    if (!itemCode) {\n        alert('Please enter or scan an item code');\n        return;\n    }\n    \n    if (quantity < 0) {\n        alert('Quantity must be 0 or greater');\n        return;\n    }\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-location-counts`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                stock_take_id: currentStockTake.id,\n                bin_location_id: currentBinLocation.id,\n                item_code: itemCode,\n                item_name: itemName || null,\n                quantity: quantity,\n                counted_by_manager_id: currentStockTake.opened_by_manager_id\n            })\n        });\n        \n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to add item');\n        }\n        \n        // Clear inputs\n        document.getElementById('itemCodeInput').value = '';\n        document.getElementById('itemNameInput').value = '';\n        document.getElementById('itemQuantityInput').value = '0';\n        \n        // Focus back on item code for next scan\n        document.getElementById('itemCodeInput').focus();\n        \n        // Reload bin items\n        loadBinItems();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.addItemToBin = addItemToBin;\n\nasync function loadBinItems() {\n    if (!currentStockTake || !currentBinLocation) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-location-counts?stock_take_id=${currentStockTake.id}&bin_location_id=${currentBinLocation.id}&submitted=0`);\n        \n        if (!response.ok) throw new Error('Failed to load bin items');\n        \n        currentBinItems = await response.json();\n        \n        const listEl = document.getElementById('binItemsList');\n        const noItemsEl = document.getElementById('noBinItems');\n        \n        if (currentBinItems.length === 0) {\n            listEl.innerHTML = '';\n            noItemsEl.style.display = 'block';\n        } else {\n            noItemsEl.style.display = 'none';\n            listEl.innerHTML = currentBinItems.map(item => `\n                <div class=\"item-card\">\n                    <div class=\"item-header\">\n                        <h3>${escapeHtml(item.item_code)}</h3>\n                        <span class=\"quantity-badge\">Qty: ${item.quantity}</span>\n                    </div>\n                    ${item.item_name ? `<div class=\"item-details\"><div class=\"detail-item\"><strong>Name:</strong> ${escapeHtml(item.item_name)}</div></div>` : ''}\n                    <div class=\"item-actions\">\n                        <button onclick=\"removeBinItem(${item.id})\" class=\"btn btn-small btn-danger\">Remove</button>\n                    </div>\n                </div>\n            `).join('');\n        }\n    } catch (error) {\n        console.error('Error loading bin items:', error);\n    }\n}\nwindow.loadBinItems = loadBinItems;\n\nasync function removeBinItem(itemId) {\n    if (!confirm('Remove this item from the bin?')) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-location-counts/${itemId}`, {\n            method: 'DELETE'\n        });\n        \n        if (!response.ok) throw new Error('Failed to remove item');\n        \n        loadBinItems();\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.removeBinItem = removeBinItem;\n\nfunction clearBinItems() {\n    if (!confirm('Clear all items from current bin? This cannot be undone.')) return;\n    \n    // Delete all unsubmitted items for this bin\n    Promise.all(currentBinItems.map(item => \n        fetch(`${CONFIG.apiUrl}/bin-location-counts/${item.id}`, { method: 'DELETE' })\n    )).then(() => {\n        loadBinItems();\n    }).catch(error => {\n        alert(`âŒ Error clearing items: ${error.message}`);\n    });\n}\nwindow.clearBinItems = clearBinItems;\n\nasync function submitBinLocation() {\n    if (!currentStockTake || !currentBinLocation) {\n        alert('Please scan a bin location first');\n        return;\n    }\n    \n    if (currentBinItems.length === 0) {\n        alert('Please add at least one item before submitting');\n        return;\n    }\n    \n    if (!confirm(`Submit ${currentBinItems.length} item(s) for bin location ${currentBinLocation.bin_code}?`)) return;\n    \n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/bin-location-counts/${currentBinLocation.id}/submit`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                stock_take_id: currentStockTake.id,\n                counted_by_manager_id: currentStockTake.opened_by_manager_id\n            })\n        });\n        \n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to submit bin location');\n        }\n        \n        const data = await response.json();\n        alert(`âœ… Successfully submitted ${data.items_submitted} item(s) for bin location ${currentBinLocation.bin_code}!`);\n        \n        // Clear bin location and items\n        clearBinLocation();\n        \n        // Reload items in view tab\n        if (document.getElementById('viewTab').classList.contains('active')) {\n            loadItems();\n        }\n    } catch (error) {\n        alert(`âŒ Error: ${error.message}`);\n    }\n}\nwindow.submitBinLocation = submitBinLocation;\n\n// Check for active stock take when switching to stock take tab\nconst originalShowTab = showTab;\nshowTab = function(tabName, clickedElement) {\n    originalShowTab(tabName, clickedElement);\n    \n    if (tabName === 'stocktake') {\n        // Try to load active stock take if we have company/warehouse selected\n        const companyId = document.getElementById('openStockTakeCompany')?.value;\n        const warehouseId = document.getElementById('openStockTakeWarehouse')?.value;\n        \n        if (companyId && warehouseId) {\n            loadActiveStockTake(companyId, warehouseId);\n        }\n    }\n};\n\nasync function loadActiveStockTake(companyId, warehouseId) {\n    try {\n        const response = await fetch(`${CONFIG.apiUrl}/stock-takes/active?company_id=${companyId}&warehouse_id=${warehouseId}`);\n        \n        if (response.ok) {\n            const stockTake = await response.json();\n            if (stockTake) {\n                currentStockTake = stockTake;\n                updateStockTakeStatus();\n            }\n        }\n    } catch (error) {\n        console.error('Error loading active stock take:', error);\n    }\n}\n\n// ========== UTILITY FUNCTIONS ==========\nfunction formatDate(dateString) {\n    if (!dateString) return '';\n    try {\n        const date = new Date(dateString);\n        return date.toLocaleString();\n    } catch (e) {\n        return dateString;\n    }\n}\n\nfunction escapeHtml(text) {\n    if (!text) return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n";

export const styleCss = "* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    min-height: 100vh;\n    padding: 20px;\n    color: #333;\n}\n\n.container {\n    max-width: 1200px;\n    margin: 0 auto;\n    background: white;\n    border-radius: 16px;\n    padding: 2rem;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n}\n\nheader {\n    text-align: center;\n    margin-bottom: 2rem;\n    padding-bottom: 1.5rem;\n    border-bottom: 2px solid #e0e0e0;\n}\n\nheader h1 {\n    font-size: 2.5rem;\n    color: #667eea;\n    margin-bottom: 0.5rem;\n}\n\n.subtitle {\n    color: #666;\n    font-size: 1.1rem;\n}\n\n/* Main Tabs */\n.tabs {\n    display: flex;\n    gap: 0.5rem;\n    margin-bottom: 2rem;\n    border-bottom: 2px solid #e0e0e0;\n}\n\n.tab-btn {\n    padding: 0.75rem 1.5rem;\n    border: none;\n    background: transparent;\n    color: #666;\n    font-size: 1rem;\n    font-weight: 600;\n    cursor: pointer;\n    border-bottom: 3px solid transparent;\n    transition: all 0.3s;\n}\n\n.tab-btn:hover {\n    color: #667eea;\n    background: rgba(102, 126, 234, 0.1);\n}\n\n.tab-btn.active {\n    color: #667eea;\n    border-bottom-color: #667eea;\n}\n\n.tab-content {\n    display: none;\n}\n\n.tab-content.active {\n    display: block;\n}\n\n/* Setup Container */\n.setup-container {\n    width: 100%;\n}\n\n.setup-tabs {\n    display: flex;\n    gap: 0.5rem;\n    margin-bottom: 1.5rem;\n    border-bottom: 2px solid #e0e0e0;\n    flex-wrap: wrap;\n}\n\n.setup-tab-btn {\n    padding: 0.5rem 1rem;\n    border: none;\n    background: transparent;\n    color: #666;\n    font-size: 0.95rem;\n    font-weight: 600;\n    cursor: pointer;\n    border-bottom: 3px solid transparent;\n    transition: all 0.3s;\n}\n\n.setup-tab-btn:hover {\n    color: #667eea;\n    background: rgba(102, 126, 234, 0.1);\n}\n\n.setup-tab-btn.active {\n    color: #667eea;\n    border-bottom-color: #667eea;\n}\n\n.setup-content {\n    display: none;\n}\n\n.setup-content.active {\n    display: block;\n}\n\n.setup-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n}\n\n.setup-header h2 {\n    color: #333;\n    margin: 0;\n}\n\n/* Form Styles */\n.form-container {\n    max-width: 600px;\n    margin: 0 auto;\n}\n\n.form-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n    margin-bottom: 1rem;\n}\n\n.form-group {\n    margin-bottom: 1.5rem;\n}\n\n.form-group label {\n    display: block;\n    margin-bottom: 0.5rem;\n    color: #333;\n    font-weight: 500;\n}\n\n.form-control {\n    width: 100%;\n    padding: 0.75rem;\n    border: 2px solid #e0e0e0;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.3s;\n    font-family: inherit;\n}\n\n.form-control:focus {\n    outline: none;\n    border-color: #667eea;\n}\n\ntextarea.form-control {\n    resize: vertical;\n    min-height: 80px;\n}\n\n.form-hint {\n    display: block;\n    margin-top: 0.25rem;\n    font-size: 0.85rem;\n    color: #666;\n    font-style: italic;\n}\n\n/* Filter Section */\n.filter-section {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 1rem;\n    margin-bottom: 1.5rem;\n}\n\n.filter-box {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.filter-box label {\n    font-weight: 500;\n    color: #333;\n    font-size: 0.9rem;\n}\n\n.filter-box select {\n    padding: 0.5rem;\n    border: 2px solid #e0e0e0;\n    border-radius: 6px;\n    font-size: 0.95rem;\n}\n\n/* Buttons */\n.btn {\n    padding: 0.75rem 1.5rem;\n    border: none;\n    border-radius: 8px;\n    font-size: 1rem;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.3s;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.btn-primary:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n}\n\n.btn-primary:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n}\n\n.btn-secondary {\n    background: #6c757d;\n    color: white;\n}\n\n.btn-secondary:hover {\n    background: #5a6268;\n}\n\n.btn-small {\n    padding: 0.5rem 1rem;\n    font-size: 0.9rem;\n    background: #667eea;\n    color: white;\n}\n\n.btn-small:hover {\n    background: #5568d3;\n}\n\n.btn-danger {\n    background: #dc3545;\n}\n\n.btn-danger:hover {\n    background: #c82333;\n}\n\n.spinner {\n    display: inline-block;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n}\n\n.result-message {\n    margin-top: 1.5rem;\n    padding: 1rem;\n    border-radius: 8px;\n    font-weight: 500;\n}\n\n.result-message.success {\n    background: #d4edda;\n    color: #155724;\n    border: 1px solid #c3e6cb;\n}\n\n.result-message.error {\n    background: #f8d7da;\n    color: #721c24;\n    border: 1px solid #f5c6cb;\n}\n\n/* View Container */\n.view-container {\n    max-width: 100%;\n}\n\n.view-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n}\n\n.view-header h2 {\n    color: #333;\n}\n\n.search-box {\n    margin-bottom: 1rem;\n}\n\n.search-input {\n    width: 100%;\n    padding: 0.75rem;\n    border: 2px solid #e0e0e0;\n    border-radius: 8px;\n    font-size: 1rem;\n}\n\n.search-input:focus {\n    outline: none;\n    border-color: #667eea;\n}\n\n.loading {\n    text-align: center;\n    padding: 3rem;\n}\n\n.spinner {\n    border: 4px solid #f3f3f3;\n    border-top: 4px solid #667eea;\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    animation: spin 1s linear infinite;\n    margin: 0 auto 1rem;\n}\n\n.error {\n    background: #fee;\n    color: #c33;\n    padding: 1rem;\n    border-radius: 8px;\n    border: 1px solid #fcc;\n    margin-bottom: 1rem;\n}\n\n.items-container {\n    margin-top: 1rem;\n}\n\n.items-list {\n    display: grid;\n    gap: 1.5rem;\n}\n\n.item-card {\n    background: #f8f9fa;\n    border-radius: 12px;\n    padding: 1.5rem;\n    border-left: 4px solid #667eea;\n    transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.item-card:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n}\n\n.item-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n}\n\n.item-header h3 {\n    color: #333;\n    font-size: 1.3rem;\n    margin: 0;\n}\n\n.item-id {\n    color: #666;\n    font-size: 0.85rem;\n}\n\n.item-details {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 0.75rem;\n    margin-bottom: 1rem;\n}\n\n.detail-item {\n    color: #666;\n    font-size: 0.95rem;\n}\n\n.detail-item strong {\n    color: #333;\n    margin-right: 0.5rem;\n}\n\n.quantity-badge {\n    background: #667eea;\n    color: white;\n    padding: 0.25rem 0.75rem;\n    border-radius: 20px;\n    font-weight: 600;\n    font-size: 1.1rem;\n}\n\n.item-actions {\n    display: flex;\n    gap: 0.5rem;\n    margin-top: 1rem;\n    padding-top: 1rem;\n    border-top: 1px solid #e0e0e0;\n}\n\n.no-items {\n    text-align: center;\n    padding: 3rem;\n    color: #666;\n    font-size: 1.1rem;\n}\n\n/* Modal Styles */\n.modal {\n    display: none;\n    position: fixed;\n    z-index: 1000;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    justify-content: center;\n    align-items: center;\n}\n\n.modal-content {\n    background-color: white;\n    border-radius: 16px;\n    padding: 2rem;\n    max-width: 600px;\n    width: 90%;\n    max-height: 90vh;\n    overflow-y: auto;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n    position: relative;\n}\n\n.modal-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n    padding-bottom: 1rem;\n    border-bottom: 2px solid #e0e0e0;\n}\n\n.modal-header h2 {\n    margin: 0;\n    color: #333;\n}\n\n.modal-close {\n    background: none;\n    border: none;\n    font-size: 2rem;\n    color: #666;\n    cursor: pointer;\n    line-height: 1;\n    padding: 0;\n    width: 30px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    transition: all 0.3s;\n}\n\n.modal-close:hover {\n    background: #f0f0f0;\n    color: #333;\n}\n\n.modal-actions {\n    display: flex;\n    gap: 1rem;\n    justify-content: flex-end;\n    margin-top: 1.5rem;\n    padding-top: 1.5rem;\n    border-top: 2px solid #e0e0e0;\n}\n\n@media (max-width: 768px) {\n    .container {\n        padding: 1rem;\n    }\n    \n    header h1 {\n        font-size: 2rem;\n    }\n    \n    .tabs {\n        flex-direction: column;\n    }\n    \n    .form-row {\n        grid-template-columns: 1fr;\n    }\n    \n    .filter-section {\n        grid-template-columns: 1fr;\n    }\n    \n    .view-header {\n        flex-direction: column;\n        gap: 1rem;\n        align-items: stretch;\n    }\n    \n    .item-details {\n        grid-template-columns: 1fr;\n    }\n    \n    .item-actions {\n        flex-direction: column;\n    }\n    \n    .modal-content {\n        width: 95%;\n        padding: 1.5rem;\n    }\n    \n    .modal-actions {\n        flex-direction: column;\n    }\n    \n    .modal-actions .btn {\n        width: 100%;\n    }\n    \n    .setup-header {\n        flex-direction: column;\n        gap: 1rem;\n        align-items: stretch;\n    }\n}\n";
